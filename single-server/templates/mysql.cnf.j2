[mysqld]

datadir= {{ mysqldir }}
ssl=0

#innodb-encrypt-tables=ON

performance_schema=on
performance-schema-instrument='wait/synch/mutex/innodb/%=ON'

skip-log-bin
log-error=error.log
#log_bin = binlog
#relay_log=relay
#sync_binlog=1000
#binlog_format = ROW
#binlog_row_image=MINIMAL
#server-id=1

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

# character_set_server=latin1
# collation_server=latin1_swedish_ci

# skip-character-set-client-handshake


 innodb_undo_log_truncate=off

# Recommended in standard MySQL setup

# general
  table_open_cache = 200000
  table_open_cache_instances=64
  back_log=3500
  max_connections=4000

# files
  innodb_file_per_table
  innodb_log_file_size=15G
  innodb_log_files_in_group=2
  innodb_open_files=4000

# buffers
  innodb_buffer_pool_size= 30G
  innodb_buffer_pool_instances=8
  innodb_log_buffer_size=128M

# tune
  innodb_doublewrite= 1
  innodb_thread_concurrency=0 
  innodb_flush_log_at_trx_commit= 1
  innodb_flush_method=O_DIRECT_NO_FSYNC
  innodb_lru_scan_depth=2048

  join_buffer_size=256K
  sort_buffer_size=256K

# perf special
  innodb_adaptive_flushing = 1
  innodb_flush_neighbors = 0

  innodb_io_capacity=15000 
  innodb_io_capacity_max=25000

  innodb_adaptive_hash_index=0

max_prepared_stmt_count=1000000

 innodb_monitor_enable = '%'
 performance_schema = ON
